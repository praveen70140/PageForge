<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1484px" preserveAspectRatio="none" style="width:1152px;height:1484px;background:#FFFFFF;" version="1.1" viewBox="0 0 1152 1484" width="1152px" zoomAndPan="magnify"><title>Sequence Diagram: Email OTP Login (UC-03)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="303.5048" x="425.4773" y="29.9659">Sequence Diagram: Email OTP Login (UC-03)</text><rect fill="none" height="999.1443" style="stroke:#000000;stroke-width:1.5;" width="1135.4595" x="10" y="384.49"/><rect fill="none" height="473.8661" style="stroke:#000000;stroke-width:1.5;" width="1115.4595" x="20" y="902.7681"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="U" id="part1-lifeline"><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="44.3089" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="48" x2="48" y1="124.1358" y2="1400.6343"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="B" id="part2-lifeline"><g><title>Browser</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="204.0941" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="207.7242" x2="207.7242" y1="124.1358" y2="1400.6343"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="LP" id="part3-lifeline"><g><title>Login Page</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="339.4652" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="342.8903" x2="342.8903" y1="124.1358" y2="1400.6343"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="SEND" id="part4-lifeline"><g><title>POST .api.auth.otp.send</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="491.9443" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="495.1286" x2="495.1286" y1="124.1358" y2="1400.6343"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="VERIFY" id="part5-lifeline"><g><title>POST .api.auth.otp.verify</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="681.8227" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="685.76" x2="685.76" y1="124.1358" y2="1400.6343"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="OTP" id="part6-lifeline"><g><title>OTP Service</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="833.5348" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="836.7689" x2="836.7689" y1="124.1358" y2="1400.6343"/></g></g><g class="participant-lifeline" data-entity-uid="part7" data-qualified-name="EMAIL" id="part7-lifeline"><g><title>Email Service</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="989.0919" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="992.9441" x2="992.9441" y1="124.1358" y2="1400.6343"/></g></g><g class="participant-lifeline" data-entity-uid="part8" data-qualified-name="DB" id="part8-lifeline"><g><title>MongoDB</title><rect fill="#000000" fill-opacity="0.00000" height="1276.4984" width="8" x="1085.3496" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1089.2397" x2="1089.2397" y1="124.1358" y2="1400.6343"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="U" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.6179" x="30" y="120.0339">User</text><ellipse cx="48.3089" cy="53.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.3089,61.5679 L48.3089,88.5679 M35.3089,69.5679 L61.3089,69.5679 M48.3089,88.5679 L35.3089,103.5679 M48.3089,88.5679 L61.3089,103.5679" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="U" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.6179" x="30" y="1414.6002">User</text><ellipse cx="48.3089" cy="1427.2022" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.3089,1435.2022 L48.3089,1462.2022 M35.3089,1443.2022 L61.3089,1443.2022 M48.3089,1462.2022 L35.3089,1477.2022 M48.3089,1462.2022 L61.3089,1477.2022" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="B" id="part2-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.7398" x="173.7242" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.7398" x="180.7242" y="112.0339">Browser</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="B" id="part2-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.7398" x="173.7242" y="1399.6343"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.7398" x="180.7242" y="1421.6002">Browser</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="LP" id="part3-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1497" x="299.8903" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1497" x="306.8903" y="112.0339">Login Page</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="LP" id="part3-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1497" x="299.8903" y="1399.6343"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1497" x="306.8903" y="1421.6002">Login Page</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="SEND" id="part4-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.6314" x="407.1286" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.6314" x="414.1286" y="112.0339">POST /api/auth/otp/send</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="SEND" id="part4-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="177.6314" x="407.1286" y="1399.6343"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="163.6314" x="414.1286" y="1421.6002">POST /api/auth/otp/send</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="VERIFY" id="part5-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.1254" x="594.76" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.1254" x="601.76" y="112.0339">POST /api/auth/otp/verify</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="VERIFY" id="part5-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.1254" x="594.76" y="1399.6343"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.1254" x="601.76" y="1421.6002">POST /api/auth/otp/verify</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="OTP" id="part6-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.5317" x="791.7689" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5317" x="798.7689" y="112.0339">OTP Service</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="OTP" id="part6-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="91.5317" x="791.7689" y="1399.6343"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5317" x="798.7689" y="1421.6002">OTP Service</text></g><g class="participant participant-head" data-entity-uid="part7" data-qualified-name="EMAIL" id="part7-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.2957" x="942.9441" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.2957" x="949.9441" y="112.0339">Email Service</text></g><g class="participant participant-tail" data-entity-uid="part7" data-qualified-name="EMAIL" id="part7-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100.2957" x="942.9441" y="1399.6343"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.2957" x="949.9441" y="1421.6002">Email Service</text></g><g class="participant participant-head" data-entity-uid="part8" data-qualified-name="DB" id="part8-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2197" x="1053.2397" y="120.0339">MongoDB</text><path d="M1071.3496,69.0679 C1071.3496,59.0679 1089.3496,59.0679 1089.3496,59.0679 C1089.3496,59.0679 1107.3496,59.0679 1107.3496,69.0679 L1107.3496,95.0679 C1107.3496,105.0679 1089.3496,105.0679 1089.3496,105.0679 C1089.3496,105.0679 1071.3496,105.0679 1071.3496,95.0679 L1071.3496,69.0679" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1071.3496,69.0679 C1071.3496,79.0679 1089.3496,79.0679 1089.3496,79.0679 C1089.3496,79.0679 1107.3496,79.0679 1107.3496,69.0679" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part8" data-qualified-name="DB" id="part8-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2197" x="1053.2397" y="1414.6002">MongoDB</text><path d="M1071.3496,1428.7022 C1071.3496,1418.7022 1089.3496,1418.7022 1089.3496,1418.7022 C1089.3496,1418.7022 1107.3496,1418.7022 1107.3496,1428.7022 L1107.3496,1454.7022 C1107.3496,1464.7022 1089.3496,1464.7022 1089.3496,1464.7022 C1089.3496,1464.7022 1071.3496,1464.7022 1071.3496,1454.7022 L1071.3496,1428.7022" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M1071.3496,1428.7022 C1071.3496,1438.7022 1089.3496,1438.7022 1089.3496,1438.7022 C1089.3496,1438.7022 1107.3496,1438.7022 1107.3496,1428.7022" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="196.0941,153.8419,206.0941,157.8419,196.0941,161.8419,200.0941,157.8419" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.3089" x2="202.0941" y1="157.8419" y2="157.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.2001" x="55.3089" y="152.0328">Navigate to /login</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="331.4652,185.5479,341.4652,189.5479,331.4652,193.5479,335.4652,189.5479" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="208.0941" x2="337.4652" y1="189.5479" y2="189.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.3711" x="215.0941" y="183.7389">Render login form</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg3"><polygon fill="#181818" points="59.3089,234.9599,49.3089,238.9599,59.3089,242.9599,55.3089,238.9599" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="342.4652" y1="238.9599" y2="238.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.2631" x="65.3089" y="215.4449">Display form with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.1592" x="65.3089" y="233.1509">"Login with OTP" option</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg4"><polygon fill="#181818" points="331.4652,284.3719,341.4652,288.3719,331.4652,292.3719,335.4652,288.3719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.3089" x2="337.4652" y1="288.3719" y2="288.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.5181" x="55.3089" y="264.8569">Enter email, click</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69.7321" x="55.3089" y="282.5629">"Send OTP"</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg5"><polygon fill="#181818" points="483.9443,316.0779,493.9443,320.0779,483.9443,324.0779,487.9443,320.0779" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="343.4652" x2="489.9443" y1="320.0779" y2="320.0779"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.1311" x="350.4652" y="314.2689">POST {email}</text></g><g class="message" data-entity-1="part4" data-entity-2="part8" id="msg6"><polygon fill="#181818" points="1077.3496,365.49,1087.3496,369.49,1077.3496,373.49,1081.3496,369.49" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="495.9443" x2="1083.3496" y1="369.49" y2="369.49"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.1961" x="502.9443" y="345.975">Check user exists</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.4261" x="502.9443" y="363.681">(UserModel.findOne)</text></g><path d="M10,384.49 L72.303,384.49 L72.303,394.196 L62.303,404.196 L10,404.196 L10,384.49" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="999.1443" style="stroke:#000000;stroke-width:1.5;" width="1135.4595" x="10" y="384.49"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.303" x="25" y="399.387">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89.5064" x="87.303" y="398.2489">[User not found]</text><g class="message" data-entity-1="part8" data-entity-2="part4" id="msg7"><polygon fill="#181818" points="506.9443,423.902,496.9443,427.902,506.9443,431.902,502.9443,427.902" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="500.9443" x2="1088.3496" y1="427.902" y2="427.902"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.776" x="512.9443" y="422.093">null</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg8"><polygon fill="#181818" points="354.4652,455.608,344.4652,459.608,354.4652,463.608,350.4652,459.608" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="348.4652" x2="494.9443" y1="459.608" y2="459.608"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.4791" x="360.4652" y="453.799">404 "User not found"</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg9"><polygon fill="#181818" points="59.3089,487.314,49.3089,491.314,59.3089,495.314,55.3089,491.314" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="342.4652" y1="491.314" y2="491.314"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.938" x="65.3089" y="485.505">Show error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="1145.4595" y1="500.314" y2="500.314"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67.4955" x="15" y="512.073">[User exists]</text><g class="message" data-entity-1="part8" data-entity-2="part4" id="msg10"><polygon fill="#181818" points="506.9443,536.002,496.9443,540.002,506.9443,544.002,502.9443,540.002" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="500.9443" x2="1088.3496" y1="540.002" y2="540.002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68.2111" x="512.9443" y="534.1929">User found</text></g><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg11"><polygon fill="#181818" points="825.5348,567.708,835.5348,571.708,825.5348,575.708,829.5348,571.708" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="495.9443" x2="831.5348" y1="571.708" y2="571.708"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.9141" x="502.9443" y="565.899">generateOTP(email)</text></g><g class="message" data-entity-1="part6" data-entity-2="part6" id="msg12"><line style="stroke:#181818;stroke-width:1;" x1="837.5348" x2="879.5348" y1="621.12" y2="621.12"/><line style="stroke:#181818;stroke-width:1;" x1="879.5348" x2="879.5348" y1="621.12" y2="634.12"/><line style="stroke:#181818;stroke-width:1;" x1="838.5348" x2="879.5348" y1="634.12" y2="634.12"/><polygon fill="#181818" points="848.5348,630.12,838.5348,634.12,848.5348,638.12,844.5348,634.12" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.8681" x="844.5348" y="597.605">Generate 6-digit OTP</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.5571" x="844.5348" y="615.311">Store with 5-min expiry</text></g><g class="message" data-entity-1="part6" data-entity-2="part4" id="msg13"><polygon fill="#181818" points="506.9443,661.826,496.9443,665.826,506.9443,669.826,502.9443,665.826" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="500.9443" x2="836.5348" y1="665.826" y2="665.826"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="58.0581" x="512.9443" y="660.017">OTP code</text></g><g class="message" data-entity-1="part4" data-entity-2="part7" id="msg14"><polygon fill="#181818" points="981.0919,693.532,991.0919,697.532,981.0919,701.532,985.0919,697.532" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="495.9443" x2="987.0919" y1="697.532" y2="697.532"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.9232" x="502.9443" y="691.723">sendOTPEmail(email, otp)</text></g><g class="message" data-entity-1="part7" data-entity-2="part4" id="msg15"><polygon fill="#181818" points="506.9443,725.2381,496.9443,729.2381,506.9443,733.2381,502.9443,729.2381" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="500.9443" x2="992.0919" y1="729.2381" y2="729.2381"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="27.196" x="512.9443" y="723.429">Sent</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg16"><polygon fill="#181818" points="354.4652,756.9441,344.4652,760.9441,354.4652,764.9441,350.4652,760.9441" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="348.4652" x2="494.9443" y1="760.9441" y2="760.9441"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.2081" x="360.4652" y="755.1351">200 "OTP sent"</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg17"><polygon fill="#181818" points="59.3089,788.6501,49.3089,792.6501,59.3089,796.6501,55.3089,792.6501" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="342.4652" y1="792.6501" y2="792.6501"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.2571" x="65.3089" y="786.8411">Show OTP input field</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg18"><polygon fill="#181818" points="331.4652,820.3561,341.4652,824.3561,331.4652,828.3561,335.4652,824.3561" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.3089" x2="337.4652" y1="824.3561" y2="824.3561"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.6751" x="55.3089" y="818.5471">Enter 6-digit OTP</text></g><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg19"><polygon fill="#181818" points="673.8227,852.0621,683.8227,856.0621,673.8227,860.0621,677.8227,856.0621" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="343.4652" x2="679.8227" y1="856.0621" y2="856.0621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.5481" x="350.4652" y="850.2531">POST {email, otp}</text></g><g class="message" data-entity-1="part5" data-entity-2="part6" id="msg20"><polygon fill="#181818" points="825.5348,883.7681,835.5348,887.7681,825.5348,891.7681,829.5348,887.7681" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="685.8227" x2="831.5348" y1="887.7681" y2="887.7681"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.7121" x="692.8227" y="881.9591">verifyOTP(email, otp)</text></g><path d="M20,902.7681 L82.303,902.7681 L82.303,912.4742 L72.303,922.4742 L20,922.4742 L20,902.7681" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="473.8661" style="stroke:#000000;stroke-width:1.5;" width="1115.4595" x="20" y="902.7681"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.303" x="35" y="917.6651">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="127.9621" x="97.303" y="916.527">[OTP invalid or expired]</text><g class="message" data-entity-1="part6" data-entity-2="part5" id="msg21"><polygon fill="#181818" points="696.8227,942.1802,686.8227,946.1802,696.8227,950.1802,692.8227,946.1802" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="690.8227" x2="836.5348" y1="946.1802" y2="946.1802"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="28.678" x="702.8227" y="940.3712">false</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg22"><polygon fill="#181818" points="354.4652,973.8862,344.4652,977.8862,354.4652,981.8862,350.4652,977.8862" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="348.4652" x2="684.8227" y1="977.8862" y2="977.8862"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.2111" x="360.4652" y="972.0772">401 "Invalid or expired OTP"</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg23"><polygon fill="#181818" points="59.3089,1005.5922,49.3089,1009.5922,59.3089,1013.5922,55.3089,1009.5922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="342.4652" y1="1009.5922" y2="1009.5922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.938" x="65.3089" y="1003.7832">Show error</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="1135.4595" y1="1018.5922" y2="1018.5922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="58.4096" x="25" y="1030.3511">[OTP valid]</text><g class="message" data-entity-1="part6" data-entity-2="part5" id="msg24"><polygon fill="#181818" points="696.8227,1054.2801,686.8227,1058.2801,696.8227,1062.2801,692.8227,1058.2801" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="690.8227" x2="836.5348" y1="1058.2801" y2="1058.2801"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25.428" x="702.8227" y="1052.4711">true</text></g><g class="message" data-entity-1="part6" data-entity-2="part6" id="msg25"><line style="stroke:#181818;stroke-width:1;" x1="837.5348" x2="879.5348" y1="1089.9861" y2="1089.9861"/><line style="stroke:#181818;stroke-width:1;" x1="879.5348" x2="879.5348" y1="1089.9861" y2="1102.9861"/><line style="stroke:#181818;stroke-width:1;" x1="838.5348" x2="879.5348" y1="1102.9861" y2="1102.9861"/><polygon fill="#181818" points="848.5348,1098.9861,838.5348,1102.9861,848.5348,1106.9861,844.5348,1102.9861" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101.1271" x="844.5348" y="1084.1771">Delete used OTP</text></g><g class="message" data-entity-1="part5" data-entity-2="part8" id="msg26"><polygon fill="#181818" points="1077.3496,1130.6921,1087.3496,1134.6921,1077.3496,1138.6921,1081.3496,1134.6921" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="685.8227" x2="1083.3496" y1="1134.6921" y2="1134.6921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.3451" x="692.8227" y="1128.8831">Find user by email</text></g><g class="message" data-entity-1="part8" data-entity-2="part5" id="msg27"><polygon fill="#181818" points="696.8227,1162.3982,686.8227,1166.3982,696.8227,1170.3982,692.8227,1166.3982" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="690.8227" x2="1088.3496" y1="1166.3982" y2="1166.3982"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.1591" x="702.8227" y="1160.5892">User document</text></g><g class="message" data-entity-1="part5" data-entity-2="part5" id="msg28"><line style="stroke:#181818;stroke-width:1;" x1="685.8227" x2="727.8227" y1="1215.8102" y2="1215.8102"/><line style="stroke:#181818;stroke-width:1;" x1="727.8227" x2="727.8227" y1="1215.8102" y2="1228.8102"/><line style="stroke:#181818;stroke-width:1;" x1="686.8227" x2="727.8227" y1="1228.8102" y2="1228.8102"/><polygon fill="#181818" points="696.8227,1224.8102,686.8227,1228.8102,696.8227,1232.8102,692.8227,1228.8102" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.3421" x="692.8227" y="1192.2952">Generate JWT token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.2591" x="692.8227" y="1210.0012">{id, name, email}</text></g><g class="message" data-entity-1="part5" data-entity-2="part3" id="msg29"><polygon fill="#181818" points="354.4652,1256.5162,344.4652,1260.5162,354.4652,1264.5162,350.4652,1260.5162" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="348.4652" x2="684.8227" y1="1260.5162" y2="1260.5162"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.2601" x="360.4652" y="1254.7072">200 {token, user}</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg30"><line style="stroke:#181818;stroke-width:1;" x1="343.4652" x2="385.4652" y1="1292.2222" y2="1292.2222"/><line style="stroke:#181818;stroke-width:1;" x1="385.4652" x2="385.4652" y1="1292.2222" y2="1305.2222"/><line style="stroke:#181818;stroke-width:1;" x1="344.4652" x2="385.4652" y1="1305.2222" y2="1305.2222"/><polygon fill="#181818" points="354.4652,1301.2222,344.4652,1305.2222,354.4652,1309.2222,350.4652,1305.2222" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.7861" x="350.4652" y="1286.4132">Set session cookie</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg31"><polygon fill="#181818" points="219.0941,1332.9282,209.0941,1336.9282,219.0941,1340.9282,215.0941,1336.9282" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="213.0941" x2="342.4652" y1="1336.9282" y2="1336.9282"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.9221" x="225.0941" y="1331.1192">router.push('/')</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg32"><polygon fill="#181818" points="59.3089,1364.6343,49.3089,1368.6343,59.3089,1372.6343,55.3089,1368.6343" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="207.0941" y1="1368.6343" y2="1368.6343"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.7851" x="65.3089" y="1362.8253">Redirect to dashboard</text></g><?plantuml-src XLHDRzf05BpxLppv4Y91e9y77oBLWLIfI8BYqAeIbutzC2lChhjUaw0e_xtlxTfWKgGUE7XdzdtCp6AbBH0I_5EZIX76KkH6R2AOR8GiuFvn1bETImMz-TLWzEay24HgjO5mNg49GLGm3qfXh4nbAPI5C3RwkONYOyWNceaS7JgT7SEp--GHXgAKGr7RrL3RSbYXoXmtcToD_ylUef7BdUF_d3pSNFy-li6x96YsClNzwVkOu5VkKYQttswcGIQiU18LGdYhLQx7iSF6SH3CON09SGHtOYjpOH6iXc71QmOnGzDP10-q0nfmfx3KPXDCPp0WS1wHsbLPY9qxXcTfLmlLgCGVF648khHIgwON5vmeI_MGX-r3MiXqJRSIwkBuhlgb4om29zAhexu5VCJGc0Q-Mc6wXhhYGY-oijL2zTZHMvrXSR6KAhjNo6ON5lWSbBOqPQso0AY0cz-tK7LHq9altapuUVJP1-HmBIJEOUzafPy1ZT4cm8A4dHy6UL_VGMtdTWLQD88S5HeIdJvwRiLpOh39BU5xGu2lWqpcqlBfGYKKN_JwVXbiI6fyAQNPjNVtZVah9JawRLqS8k1K4khYqcjyeFnnUyVe525Rx7jrFev6FenKnvxGXI6fofgKarXa0J7UUT_Pfxb-sIJ-o78trHinFBRNnR-JlMpDyCHZjttthIXa1jfuSP2rF-ZJjbeAyiuXROEz_nyWlFcdYCydyqyc0S1bWRkucoTxMbFZ0MWM6cE1P3F5EMiqwUxCUR-cHFkuF-tyqt6a9cbjSPUrJAVrnjlMhT9ozg7wyUkHdliQrKAzogmFIcom3yrREo4As_xgBlJT96zx9JoUeAL4L1KzTigTNali46W5eslo_gAigrNlR7Xsxj2urV41Cv8ujVmFb8bgzQI5OGKfgW7__W80?></g></svg>