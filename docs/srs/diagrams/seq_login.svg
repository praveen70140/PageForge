<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1027px" preserveAspectRatio="none" style="width:794px;height:1027px;background:#FFFFFF;" version="1.1" viewBox="0 0 794 1027" width="794px" zoomAndPan="magnify"><title>Sequence Diagram: User Login with Credentials (UC-02)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="384.3965" x="206.2694" y="29.9659">Sequence Diagram: User Login with Credentials (UC-02)</text><rect fill="none" height="559.9661" style="stroke:#000000;stroke-width:1.5;" width="777.9353" x="10" y="366.784"/><rect fill="none" height="302.336" style="stroke:#000000;stroke-width:1.5;" width="687.8384" x="20" y="617.414"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="U" id="part1-lifeline"><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="819.6142" width="8" x="44.3089" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="48" x2="48" y1="124.1358" y2="943.75"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="B" id="part2-lifeline"><g><title>Browser</title><rect fill="#000000" fill-opacity="0.00000" height="819.6142" width="8" x="204.0941" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="207.7242" x2="207.7242" y1="124.1358" y2="943.75"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="LP" id="part3-lifeline"><g><title>Login Page</title><rect fill="#000000" fill-opacity="0.00000" height="819.6142" width="8" x="339.4652" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="342.8903" x2="342.8903" y1="124.1358" y2="943.75"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="NA" id="part4-lifeline"><g><title>NextAuth</title><rect fill="#000000" fill-opacity="0.00000" height="819.6142" width="8" x="563.4963" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="566.5486" x2="566.5486" y1="124.1358" y2="943.75"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="DB" id="part5-lifeline"><g><title>MongoDB</title><rect fill="#000000" fill-opacity="0.00000" height="819.6142" width="8" x="737.8255" y="124.1358"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="741.7156" x2="741.7156" y1="124.1358" y2="943.75"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="U" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.6179" x="30" y="120.0339">User</text><ellipse cx="48.3089" cy="53.5679" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.3089,61.5679 L48.3089,88.5679 M35.3089,69.5679 L61.3089,69.5679 M48.3089,88.5679 L35.3089,103.5679 M48.3089,88.5679 L61.3089,103.5679" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="U" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.6179" x="30" y="957.716">User</text><ellipse cx="48.3089" cy="970.3179" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M48.3089,978.3179 L48.3089,1005.3179 M35.3089,986.3179 L61.3089,986.3179 M48.3089,1005.3179 L35.3089,1020.3179 M48.3089,1005.3179 L61.3089,1020.3179" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="B" id="part2-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.7398" x="173.7242" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.7398" x="180.7242" y="112.0339">Browser</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="B" id="part2-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="68.7398" x="173.7242" y="942.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.7398" x="180.7242" y="964.716">Browser</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="LP" id="part3-head"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1497" x="299.8903" y="90.0679"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1497" x="306.8903" y="112.0339">Login Page</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="LP" id="part3-tail"><rect fill="#E2E2F0" height="33.0679" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87.1497" x="299.8903" y="942.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.1497" x="306.8903" y="964.716">Login Page</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="NA" id="part4-head"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.8955" x="493.5486" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.2998" x="536.3465" y="92.9659">NextAuth</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.8955" x="500.5486" y="112.0339">Credentials Provider</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="NA" id="part4-tail"><rect fill="#E2E2F0" height="52.1358" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="147.8955" x="493.5486" y="942.75"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.2998" x="536.3465" y="964.716">NextAuth</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133.8955" x="500.5486" y="983.7839">Credentials Provider</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="DB" id="part5-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2197" x="705.7156" y="120.0339">MongoDB</text><path d="M723.8255,69.0679 C723.8255,59.0679 741.8255,59.0679 741.8255,59.0679 C741.8255,59.0679 759.8255,59.0679 759.8255,69.0679 L759.8255,95.0679 C759.8255,105.0679 741.8255,105.0679 741.8255,105.0679 C741.8255,105.0679 723.8255,105.0679 723.8255,95.0679 L723.8255,69.0679" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M723.8255,69.0679 C723.8255,79.0679 741.8255,79.0679 741.8255,79.0679 C741.8255,79.0679 759.8255,79.0679 759.8255,69.0679" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="DB" id="part5-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2197" x="705.7156" y="957.716">MongoDB</text><path d="M723.8255,971.8179 C723.8255,961.8179 741.8255,961.8179 741.8255,961.8179 C741.8255,961.8179 759.8255,961.8179 759.8255,971.8179 L759.8255,997.8179 C759.8255,1007.8179 741.8255,1007.8179 741.8255,1007.8179 C741.8255,1007.8179 723.8255,1007.8179 723.8255,997.8179 L723.8255,971.8179" fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M723.8255,971.8179 C723.8255,981.8179 741.8255,981.8179 741.8255,981.8179 C741.8255,981.8179 759.8255,981.8179 759.8255,971.8179" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="196.0941,153.8419,206.0941,157.8419,196.0941,161.8419,200.0941,157.8419" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.3089" x2="202.0941" y1="157.8419" y2="157.8419"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.2001" x="55.3089" y="152.0328">Navigate to /login</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="331.4652,185.5479,341.4652,189.5479,331.4652,193.5479,335.4652,189.5479" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="208.0941" x2="337.4652" y1="189.5479" y2="189.5479"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.3711" x="215.0941" y="183.7389">Render login form</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg3"><polygon fill="#181818" points="59.3089,217.2539,49.3089,221.2539,59.3089,225.2539,55.3089,221.2539" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="342.4652" y1="221.2539" y2="221.2539"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.3052" x="65.3089" y="215.4449">Display form (email, password)</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg4"><polygon fill="#181818" points="331.4652,248.9599,341.4652,252.9599,331.4652,256.9599,335.4652,252.9599" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="48.3089" x2="337.4652" y1="252.9599" y2="252.9599"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.5911" x="55.3089" y="247.1509">Submit login form</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg5"><polygon fill="#181818" points="555.4963,298.3719,565.4963,302.3719,555.4963,306.3719,559.4963,302.3719" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="343.4652" x2="561.4963" y1="302.3719" y2="302.3719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118.5081" x="350.4652" y="278.8569">signIn('credentials',</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.0312" x="350.4652" y="296.5629">{email, password, redirect:false})</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg6"><polygon fill="#181818" points="729.8255,347.784,739.8255,351.784,729.8255,355.784,733.8255,351.784" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="567.4963" x2="735.8255" y1="351.784" y2="351.784"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.3451" x="574.4963" y="328.2689">Find user by email</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.4261" x="574.4963" y="345.975">(UserModel.findOne)</text></g><path d="M10,366.784 L72.303,366.784 L72.303,376.49 L62.303,386.49 L10,386.49 L10,366.784" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="559.9661" style="stroke:#000000;stroke-width:1.5;" width="777.9353" x="10" y="366.784"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.303" x="25" y="381.681">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89.5064" x="87.303" y="380.5429">[User not found]</text><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg7"><polygon fill="#181818" points="578.4963,406.196,568.4963,410.196,578.4963,414.196,574.4963,410.196" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="572.4963" x2="740.8255" y1="410.196" y2="410.196"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22.776" x="584.4963" y="404.387">null</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg8"><polygon fill="#181818" points="354.4652,437.902,344.4652,441.902,354.4652,445.902,350.4652,441.902" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="348.4652" x2="566.4963" y1="441.902" y2="441.902"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.7631" x="360.4652" y="436.093">{error: "CredentialsSignin"}</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg9"><polygon fill="#181818" points="59.3089,469.608,49.3089,473.608,59.3089,477.608,55.3089,473.608" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="342.4652" y1="473.608" y2="473.608"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.7001" x="65.3089" y="467.799">"Invalid email or password"</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="787.9353" y1="482.608" y2="482.608"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67.8475" x="15" y="494.3669">[User found]</text><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg10"><polygon fill="#181818" points="578.4963,536.002,568.4963,540.002,578.4963,544.002,574.4963,540.002" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="572.4963" x2="740.8255" y1="540.002" y2="540.002"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.1591" x="584.4963" y="516.4869">User document</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.8551" x="584.4963" y="534.1929">(with passwordHash)</text></g><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg11"><line style="stroke:#181818;stroke-width:1;" x1="567.4963" x2="609.4963" y1="589.414" y2="589.414"/><line style="stroke:#181818;stroke-width:1;" x1="609.4963" x2="609.4963" y1="589.414" y2="602.414"/><line style="stroke:#181818;stroke-width:1;" x1="568.4963" x2="609.4963" y1="602.414" y2="602.414"/><polygon fill="#181818" points="578.4963,598.414,568.4963,602.414,578.4963,606.414,574.4963,602.414" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100.5551" x="574.4963" y="565.899">bcrypt.compare(</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.3291" x="574.4963" y="583.605">password, passwordHash)</text></g><path d="M20,617.414 L82.303,617.414 L82.303,627.12 L72.303,637.12 L20,637.12 L20,617.414" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="302.336" style="stroke:#000000;stroke-width:1.5;" width="687.8384" x="20" y="617.414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.303" x="35" y="632.311">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99.5932" x="97.303" y="631.1729">[Password invalid]</text><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg12"><polygon fill="#181818" points="354.4652,656.826,344.4652,660.826,354.4652,664.826,350.4652,660.826" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="348.4652" x2="566.4963" y1="660.826" y2="660.826"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.7631" x="360.4652" y="655.017">{error: "CredentialsSignin"}</text></g><g class="message" data-entity-1="part3" data-entity-2="part1" id="msg13"><polygon fill="#181818" points="59.3089,688.532,49.3089,692.532,59.3089,696.532,55.3089,692.532" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="342.4652" y1="692.532" y2="692.532"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.7001" x="65.3089" y="686.723">"Invalid email or password"</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="20" x2="707.8384" y1="701.532" y2="701.532"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89.1543" x="25" y="713.2909">[Password valid]</text><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg14"><line style="stroke:#181818;stroke-width:1;" x1="567.4963" x2="609.4963" y1="758.926" y2="758.926"/><line style="stroke:#181818;stroke-width:1;" x1="609.4963" x2="609.4963" y1="758.926" y2="771.926"/><line style="stroke:#181818;stroke-width:1;" x1="568.4963" x2="609.4963" y1="771.926" y2="771.926"/><polygon fill="#181818" points="578.4963,767.926,568.4963,771.926,578.4963,775.926,574.4963,771.926" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.3421" x="574.4963" y="735.4109">Generate JWT token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.2591" x="574.4963" y="753.117">{id, name, email}</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg15"><polygon fill="#181818" points="354.4652,799.632,344.4652,803.632,354.4652,807.632,350.4652,803.632" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="348.4652" x2="566.4963" y1="803.632" y2="803.632"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.9081" x="360.4652" y="797.823">{ok: true, url: "/"}</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg16"><line style="stroke:#181818;stroke-width:1;" x1="343.4652" x2="385.4652" y1="835.338" y2="835.338"/><line style="stroke:#181818;stroke-width:1;" x1="385.4652" x2="385.4652" y1="835.338" y2="848.338"/><line style="stroke:#181818;stroke-width:1;" x1="344.4652" x2="385.4652" y1="848.338" y2="848.338"/><polygon fill="#181818" points="354.4652,844.338,344.4652,848.338,354.4652,852.338,350.4652,848.338" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.7861" x="350.4652" y="829.529">Set session cookie</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg17"><polygon fill="#181818" points="219.0941,876.044,209.0941,880.044,219.0941,884.044,215.0941,880.044" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="213.0941" x2="342.4652" y1="880.044" y2="880.044"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90.9221" x="225.0941" y="874.235">router.push('/')</text></g><g class="message" data-entity-1="part2" data-entity-2="part1" id="msg18"><polygon fill="#181818" points="59.3089,907.75,49.3089,911.75,59.3089,915.75,55.3089,911.75" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="53.3089" x2="207.0941" y1="911.75" y2="911.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.7851" x="65.3089" y="905.941">Redirect to dashboard</text></g><?plantuml-src bL9DZzem4BtxLuno8KXyL3tci19Pr7OhbaPBqLwuc6G85iaujHqeMl7VEqv2-UWUjWTVvetVl3Vpd785mW9_rKWfmbJ9tCWoWgL50pETAuA3SbjuD9WXEIKB2-7oSVZfSry8cJfj8F2z0KWBIr59urIgAaaEWjZemncARw6MEP4vDkWikONd-DjDQhTTqVNSnEYzoZh2-KHaqicrj0Z1iwPSJ-C6cCP2B67u0744SxbNkNG8JiEuy3D5xA5P4i4B4dD1KuMDDgMO9J1aS1dn6cnLo6DJXX1BgOe1LDBQWpPPl-Ft98jwNIftJ_B0wYAmAgSd2dlfnK9liAAtExe1CAuCfYxQS0kU-c8-yHnJDl15KGQrlyNw2Ct75OL-tyywmsAqOVW7eJz5uTgRaNOifAPC03CqXhmOgek2Avwva_w6ncWJGN2ruWLBLXISkFEoZE29zh9GMJiV-E9dwO505jpEVMTcKyzqMfTCpxgR89t_VfDss-yKjUthr1mhDqfroLd0S4MN3Tr_ycwJhWQgbSVb__7tKOS0ZSU_qsvdjSg_8g7nCVl--fEZjaFYColMJRB4GSjw-aUVtaNWJCqDjIbOnFXALvSkT63HMgK9Kgrt2gyQE1r6rmxDgAhjDkoDU_q6ZS-kNhfO-V1dlBYrbiOhvzmB__u0?></g></svg>